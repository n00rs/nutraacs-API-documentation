<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>NutraACS Integration Guide — Ethiopian Airlines</title>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial; margin: 40px; color: #111; }
    header { border-bottom: 1px solid #e6e6e6; padding-bottom: 12px; margin-bottom: 24px; }
    h1 { font-size: 22px; margin: 0 0 4px 0; }
    p.lead { color: #333; margin: 4px 0 14px 0; }
    section { margin-bottom: 18px; }
    pre, code { background:#f5f5f5; padding:8px; border-radius:6px; display:block; overflow:auto; }
    table { border-collapse: collapse; width:100%; margin-top:8px; }
    th, td { text-align:left; padding:8px; border:1px solid #eaeaea; }
    th { background:#f8f8f8; }
    .note { font-size:0.95em; color:#555; background:#fcfcfc; padding:10px; border-left:4px solid #2196F3; border-radius:4px; }
    footer { font-size:0.85em; color:#666; margin-top:28px; border-top:1px solid #eee; padding-top:12px; }
  </style>
</head>
<body>
  <header>
    <h1>NutraACS Integration Guide — API Login for Airlines</h1>
    <p class="lead">Concise instructions for Ethiopian Airlines to obtain an access token for API integration with NutraACS.</p>
  </header>

  <section>
    <h2>1. Purpose</h2>
    <p>This document explains how Ethiopian Airlines (and other integrated customers) can authenticate with <strong>nuTRAACS</strong> using the API Integration login method.</p>
  </section>

  <section>
    <h2>2. API Endpoint</h2>
    <p><strong>POST</strong> <code>/api/authentication/auth/login-user</code></p>
    <p>This endpoint returns an access token to be used for subsequent NutraACS API requests.</p>
  </section>

  <section>
    <h2>3. Request Details</h2>
    <table>
      <thead>
        <tr><th>Field</th><th>Type</th><th>Description</th></tr>
      </thead>
      <tbody>
        <tr><td><code>strUserName</code></td><td>string</td><td>Registered integration username provided by Nucore</td></tr>
        <tr><td><code>strPassword</code></td><td>string</td><td>Password associated with the integration user</td></tr>
        <tr><td><code>authType</code></td><td>string</td><td>Use <code>API_INTEGRATION</code> for API integrations </td></tr>
        <tr><td><code>strCustomerCode</code></td><td>string</td><td>Customer code retrieved from <code>/api/tenancy/tenancy/get_customers</code></td></tr>
        <tr><td><code>strApplicationCode</code></td><td>string</td><td>Application code (e.g., <code>nuTRAACS</code>)</td></tr>
      </tbody>
    </table>
  </section>

  <section>
    <h2>4. Example Request</h2>
    <pre>{
  "strUserName": "dev_jon@ethiopiaairlince.com",
  "strPassword": "D@v&q1W2E3",
  "authType": "API_INTEGRATION",
  "strCustomerCode": "ABA001",
  "strApplicationCode": "nuTRAACS"
}</pre>
  </section>

  <section>
    <h2>5. Example Responses</h2>

    <h3>Success</h3>
    <p><strong>HTTP 200 OK</strong></p>
    <pre>{
  "strAccessToken": "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdHJVc2VyTmFtZSI6Im.."
}</pre>
    <p class="note">Use the <code>strAccessToken</code> as a Bearer token in the <code>Authorization</code> header for subsequent NutraACS API calls.</p>

    <h3>Errors</h3>
    <table>
      <thead><tr><th>Scenario</th><th>Status Code</th><th>Example Response</th></tr></thead>
      <tbody>
        <tr><td>Password not provided</td><td>400</td><td><pre>{"errCommon":[{"strMessage":"PASSWORD_MISSING"}]}</pre></td></tr>
        <tr><td>Username not provided</td><td>400</td><td><pre>{ "errCommon": [{"strMessage": "USERNAME_MISSING"}] }</pre></td></tr>
        <tr><td>Customer code not provided</td><td>400</td><td><pre>{ "errCommon": [{"strMessage": "CUSTOMER_MISSING"}] }</pre></td></tr>
        <tr><td>Invalid username</td><td>400</td><td><pre>{"errCommon":[{"strMessage":"INVALID_LOGIN_CREDENTIALS"}]}</pre></td></tr>
        <tr><td>Invalid password</td><td>400</td><td><pre>{ "errCommon": [{"strMessage": "PASSWORD_MISMATCH"}] }</pre></td></tr>
        <tr><td>Invalid customer code</td><td>400</td><td><pre>{ "errCommon": [{"strMessage": "INVALID_CUSTOMER"}] }</pre></td></tr>
        <tr><td>API user not found</td><td>400</td><td><pre>{ "errCommon": [{"strMessage": "API_USER_NOT_FOUND"}] }</pre></td></tr>
        <tr><td>Customer has no access to NutraACS</td><td>400</td><td><pre>{ "errCommon": [{"strMessage": "NO_ACCESS_TO_ANY_APPLICATION"}] }</pre></td></tr>
      </tbody>
    </table>
  </section>

  <section>
    <h2>6. Notes</h2>
    <ul>
      <li>The <code>strCustomerCode</code> must correspond to a valid airline customer retrieved using the <code>/api/tenancy/tenancy/get_customers</code> endpoint.</li>
      <li>For integration issues or missing API users, please contact <strong>Nucore Support</strong>.</li>
    </ul>
  </section>

  <footer>
    <p>Prepared for Ethiopian Airlines — NutraACS Integration</p>
  </footer>
</body>
</html>
